(jQuery);(function($){$.extend({_jsonp:{scripts:{},counter:1,head:document.getElementsByTagName("head")[0],name:function(callback){var name='_jsonp_'+(new Date).getTime()+'_'+this.counter;this.counter++;var cb=function(json){eval('delete '+name);callback(json);$._jsonp.head.removeChild($._jsonp.scripts[name]);delete $._jsonp.scripts[name];};eval(name+' = cb');return name;},load:function(url,name){var script=document.createElement('script');script.type='text/javascript';script.charset=this.charset;script.src=url;this.head.appendChild(script);this.scripts[name]=script;}},getJSONP:function(url,callback){var name=$._jsonp.name(callback);var url=url.replace(/{callback};/,name);$._jsonp.load(url,name);return this;}});})(jQuery);(function($){$.fn.jdSlide=function(option){var settings=$.extend({width:null,height:null,pics:[],index:0,type:"num",current:"curr",delay1:200,delay2:8000},option||{});var element=this;var timer1,timer2,timer3,flag=true;var total=settings.pics.length;var init=function(){var img="<ul style='position:absolute;top:0;left:0;'><li><a href='"+settings.pics[0].href+"' target='_blank'><img src='"+settings.pics[0].src+"' width='"+settings.width+"' height='"+settings.height+"' /></a></li></ul>";element.css({"position":"relative"}).html(img);$(function(){delayLoad();})};init();var initIndex=function(){var indexs="<div>";var current;var x;for(var i=0;i<total;i++){current=(i==settings.index)?settings.current:"";switch(settings.type){case "num":x=i+1;break;case "string":x=settings.pics[i].alt;break;case "image":x="<img src='"+settings.pics[i].breviary+"' />";default:break;};indexs+="<span class='"+current+"'><a href='"+settings.pics[i].href+"' target='_blank'>"+x+"</a></span>";};indexs+="</div>";element.append(indexs);element.find("span").bind("mouseover",function(e){clearInterval(timer1);clearInterval(timer3);var index=element.find("span").index(this);if(index==settings.index){return;}else{timer3=setInterval(function(){if(flag)running(parseInt(index));},settings.delay1);}}).bind("mouseleave",function(e){clearInterval(timer3);timer1=setInterval(function(){running(settings.index+1,true);},settings.delay2);})};var running=function(index,tag){if(index==total){index=0;};element.find("span").eq(settings.index).removeClass(settings.current);element.find("span").eq(index).addClass(settings.current);timer2=setInterval(function(){var pos_y=parseInt(element.find("ul").get(0).style.top);var pos_a=Math.abs(pos_y+settings.index*settings.height);var pos_b=Math.abs(index-settings.index)*settings.height;var pos_c=Math.ceil((pos_b-pos_a)/4);if(pos_a==pos_b){clearInterval(timer2);if(tag){settings.index++;if(settings.index==total){settings.index=0;}}else{settings.index=index;};flag=true;}else{if(settings.index<index){element.find("ul").css({top:pos_y-pos_c+"px"});}else{element.find("ul").css({top:pos_y+pos_c+"px"});};flag=false;}},10);};var delayLoad=function(){var img="";for(var i=1;i<total;i++){img+="<li><a href='"+settings.pics[i].href+"' target='_blank'><img src='"+settings.pics[i].src+"' width='"+settings.width+"' height='"+settings.height+"' /></a></li>";};element.find("ul").append(img);timer1=setInterval(function(){running(settings.index+1,true);},settings.delay2);if(settings.type)initIndex();};}})